<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>v0.42 &mdash; UniVRM Programming Document  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="v0.43" href="v0.43.html" />
    <link rel="prev" title="v0.41" href="v0.41.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
<a href="../../../ja/release/055/v0.42.html">日本語</a> [English]

            <a href="../../index.html" class="icon icon-home"> UniVRM Programming Document
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../build.html">Build Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../implementation/index.html">Implementation note</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gltf/index.html">glTF</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vrm0/index.html">VRM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vrm1/index.html">VRM-1.0(β)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Release</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../unitypackage.html">バージョン毎の UnityPackage</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">～v0.55 (Unity-5.6. NET-3.5) Recommended version v0.55</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="index.html#unitypackage">UnityPackage</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html#releases">Releases</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="v0.40.html">v0.40</a></li>
<li class="toctree-l4"><a class="reference internal" href="v0.41.html">v0.41</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">v0.42</a></li>
<li class="toctree-l4"><a class="reference internal" href="v0.43.html">v0.43</a></li>
<li class="toctree-l4"><a class="reference internal" href="v0.44.html">v0.44: UniGLTF/UniUnlit 追加</a></li>
<li class="toctree-l4"><a class="reference internal" href="v0.45.html">v0.45</a></li>
<li class="toctree-l4"><a class="reference internal" href="v0.46.html">v0.46</a></li>
<li class="toctree-l4"><a class="reference internal" href="v0.47.html">v0.47</a></li>
<li class="toctree-l4"><a class="reference internal" href="v0.48.html">v0.48</a></li>
<li class="toctree-l4"><a class="reference internal" href="v0.49.html">v0.49</a></li>
<li class="toctree-l4"><a class="reference internal" href="v0.50.html">v0.50</a></li>
<li class="toctree-l4"><a class="reference internal" href="v0.51.0.html">v0.51.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="v0.52.0.html">v0.52.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="v0.53.0.html">v0.53.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="v0.54.0.html">v0.54.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="v0.55.0.html">v0.55.0</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../056/index.html">v0.56～v0.67 (Unity-2018.4) 推奨バージョンv0.66</a></li>
<li class="toctree-l2"><a class="reference internal" href="../068/index.html">v0.68-v0.78 (Unity-2018.4) Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../079/index.html">v0.79～ (Unity-2019.4) Latest Version</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">UniVRM Programming Document</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Release</a> &raquo;</li>
          <li><a href="index.html">～v0.55 (Unity-5.6. NET-3.5) Recommended version v0.55</a> &raquo;</li>
      <li>v0.42</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/vrm-c/UniVRM/blob/master/docs/release/055/v0.42.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="v0-42">
<h1>v0.42<a class="headerlink" href="#v0-42" title="Permalink to this headline"></a></h1>
<section id="important-information">
<h2>※Important Information※<a class="headerlink" href="#important-information" title="Permalink to this headline"></a></h2>
<p>The errors in VRM output from earlier versions (UniVRM 0.41 and before) have been fixed in v0.42. However, this fix comes along with the following impact:</p>
<ul class="simple">
<li><p>The exported VRM data in v0.42 or later cannot be imported correctly in the earlier versions</p></li>
</ul>
<p>When exporting VRM data using UniVRM, please check which version you use to make VRM model.
If you are using UniVRM to import VRM data, please update UniVRM to the latest version as soon as you can.</p>
</section>
<section id="uv-bugs-fix">
<h2>UV Bugs Fix:<a class="headerlink" href="#uv-bugs-fix" title="Permalink to this headline"></a></h2>
<p>In v0.41 and the earlier versions, converting UV between Unity and GLTF was incorrect.</p>
<p>Before</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="kt">var</span> <span class="n">converted_uv</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vec2</span><span class="p">(</span><span class="n">uv</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="p">-</span><span class="n">uv</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>　<span class="c1">// value becomes negative</span>
</pre></div>
</div>
<p>After</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="kt">var</span> <span class="n">converted_uv</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vec2</span><span class="p">(</span><span class="n">uv</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="m">1.0f</span><span class="p">-</span><span class="n">uv</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
</pre></div>
</div>
<p>This change influences both import and export.</p>
<section id="current-status-in-v0-42">
<h3>Current status in v0.42:<a class="headerlink" href="#current-status-in-v0-42" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The UV of imported VRM is correct.</p></li>
<li><p>V will become negative when loading the correct UV of VRM with the earlier versions.</p></li>
<li><p>Texture display will be distorted if texture is set to <code class="docutils literal notranslate"><span class="pre">Clamp</span></code>. The default is <code class="docutils literal notranslate"><span class="pre">Repeat</span></code>.</p></li>
</ul>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p></p></th>
<th class="head"><p>VRM’s UV in v0.41 and before</p></th>
<th class="head"><p>VRM’s UV from v0.42</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Importer in UniVRM-0.41 and before</p></td>
<td><p>〇 (negative x negative = positive)</p></td>
<td><p>× (positive x negative = negative)</p></td>
</tr>
<tr class="row-odd"><td><p>Importer from UniVRM-0.42</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
</tr>
<tr class="row-even"><td><p>General GLTF loader</p></td>
<td><p>×</p></td>
<td><p>〇</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>To developers: please update UniVRM to v0.42 as soon as possible.</p></li>
<li><p>We created a judger based on the string <code class="docutils literal notranslate"><span class="pre">UniGLTF-1.16</span> <span class="pre">(v0.42)</span></code> in GLTF <code class="docutils literal notranslate"><span class="pre">/assets/generator</span></code> in importer to detect whether a VRM model is made by the version before 0.42. For v0.42, it can import VRM model correctly.</p></li>
</ul>
</section>
</section>
<section id="tangents-bugs-fix">
<h2>Tangents Bugs Fix:<a class="headerlink" href="#tangents-bugs-fix" title="Permalink to this headline"></a></h2>
<p>The method to call <a class="reference external" href="https://docs.unity3d.com/ScriptReference/Mesh.RecalculateTangents.html">Mesh.RecalculateTangents</a>
was inappropriate and it was not able to generate Tangents.
We have fixed this issue.
It influences the use of normal map.</p>
<section id="tangents-processing-modification">
<h3>Tangents processing modification:<a class="headerlink" href="#tangents-processing-modification" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Tangents can be calculated and generated from Normal and UV</p></li>
<li><p>The differences of coordinate axes between GLTF and Unity can be absorbed</p></li>
<li><p>File size can be decreased if Tangents is not recorded</p></li>
</ul>
<p>Based on the reasons above, we decided not to export Tangents.
(If any problem occurs, please let us know through https://github.com/ousttrue/UniGLTF/issues)</p>
</section>
</section>
<section id="gltf-improvement">
<h2>GLTF Improvement:<a class="headerlink" href="#gltf-improvement" title="Permalink to this headline"></a></h2>
<section id="bufferviews-bytestridewill-not-output">
<h3><code class="docutils literal notranslate"><span class="pre">/bufferViews/*/byteStride</span></code>will not output<a class="headerlink" href="#bufferviews-bytestridewill-not-output" title="Permalink to this headline"></a></h3>
<p>It seems necessary for outputting OpenGL’s interleaved vbo format:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Example of interleaved format</span>
<span class="k">struct</span> <span class="nc">Vertex</span>
<span class="p">{</span>
  <span class="k">public</span> <span class="n">Vector3</span> <span class="n">Position</span><span class="p">;</span>
  <span class="k">public</span> <span class="n">Vector3</span> <span class="n">Normal</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Vertex</span><span class="p">[]</span> <span class="n">Vertices</span><span class="p">;</span>
</pre></div>
</div>
<p>Since UniGLTF outputs separate arrays for each vertex attribute, ByteStride was unnecessary.</p>
<blockquote>
<div><p>When this is not defined, data is tightly packed. When two or more accessors use the same bufferView, this field must be defined.</p>
</div></blockquote>
<p>Also, we found that ByteStride should not output to Index.</p>
</section>
<section id="gltf-material-support-improvement">
<h3>GLTF material support improvement:<a class="headerlink" href="#gltf-material-support-improvement" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/materials/*/alphaMode</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/materials/*/doubleSided</span></code></p></li>
<li><p>KHR_material_unlit</p></li>
<li><p>texture sampler(repeat, clamp, mirror)</p></li>
<li><p>https://github.com/ousttrue/UniGLTF/issues/12</p></li>
<li><p><a class="reference external" href="https://github.com/dwango/UniVRM/issues/28">Handling semi-transparent texture #28</a></p></li>
</ul>
<p><a class="reference external" href="https://github.com/ousttrue/UniGLTF/wiki/Material">Details</a></p>
<p>Also, when setting MToon, we tried to pass parameters as many as possible to GLTF material: <code class="docutils literal notranslate"><span class="pre">KHR_material_unlit,</span> <span class="pre">AlphaMode,</span> <span class="pre">DoubleSided</span></code>.</p>
<p>This improvement has influences on VRM files changed to .glb format when loading with other tools.</p>
</section>
</section>
<section id="vrm-jsonshcema-release">
<h2>VRM JsonShcema Release:<a class="headerlink" href="#vrm-jsonshcema-release" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>https://github.com/dwango/UniVRM/tree/master/specification/0.0/schema</p></li>
</ul>
</section>
<section id="directory-structure-changes">
<h2>Directory Structure Changes:<a class="headerlink" href="#directory-structure-changes" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>VRM/UniHumanoid =&gt; VRM/UniGLTF/UniHumanoid</p></li>
<li><p>VRM/Scripts/DepthFirstScheduler(Former UniTask) =&gt; VRM/UniGLTF/DepthFirstScheduler</p></li>
</ul>
</section>
<section id="blendshape-asset">
<h2>BlendShape Asset:<a class="headerlink" href="#blendshape-asset" title="Permalink to this headline"></a></h2>
<p>The asset for BlendShape now is independent (previously it is a sub-asset of Prefab)</p>
<ul class="simple">
<li><p>https://github.com/dwango/UniVRM/pull/26</p></li>
</ul>
</section>
<section id="blendshape-reference">
<h2>BlendShape Reference:<a class="headerlink" href="#blendshape-reference" title="Permalink to this headline"></a></h2>
<p>The state of BlendShape before model normalization is now used as a reference. You can make BlendShape before normalization and Bake the state of BlendShape during normalization.</p>
</section>
<section id="unihumanoid-bvh-judgement-fix">
<h2>UniHumanoid BVH Judgement Fix:<a class="headerlink" href="#unihumanoid-bvh-judgement-fix" title="Permalink to this headline"></a></h2>
<p>We fixed BVH skeleton estimation.
Report errors here when it fails: https://github.com/ousttrue/UniHumanoid/issues</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="v0.41.html" class="btn btn-neutral float-left" title="v0.41" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="v0.43.html" class="btn btn-neutral float-right" title="v0.43" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, VRM Consortium.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>